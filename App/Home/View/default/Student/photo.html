
{extend name='Public:layoutstudent'/}

{block name='CSS'}

<link rel="stylesheet" type="text/css" href="__CSS__plugins/fileinput/fileinput.min.css">
<style type="text/css">


</style>

{/block}
{block name="panel-title"}<span>我的头像</span>{/block}

{block name="panel-body"}

<div class="panel-body">
 <div class="row" >
			<div class="col-sm-10 col-sm-offset-1">
             <input id="file" name="myfile" type="file" data-show-caption="true">  
    	    </div>
    </div>
</div>
  


{/block}



{block name='JS'}
<script type="text/javascript" src="__JS__plugins/fileinput/fileinput.min.js"></script>
<script type="text/javascript" src="__JS__plugins/fileinput/zh.js"></script>
<script type="text/javascript">
    // function initFileInput(ctrlName,uploadUrl) {      
    //         var control = $('#' + ctrlName);   
    //         control.fileinput({  
    //             language: 'zh', //设置语言  
    //             uploadUrl: uploadUrl,  //上传地址  
    //             showUpload: false, //是否显示上传按钮  
    //             showRemove:true,  
    //              dropZoneEnabled: false,  
    //             showCaption: true,//是否显示标题  
    //             allowedPreviewTypes: ['image'],  
    //             allowedFileTypes: ['image'],  
    //             allowedFileExtensions:  ['jpg', 'png'],  
    //             maxFileSize : 2000,  
    //             maxFileCount: 1,  
    //             // initialPreview: [   
    //             //         预览图片的设置  
    //             //        "<img src='http://127.0.0.1:8080/NewsManageSys/plugin/umeditor1_2_2/jsp/upload/20161030/55061                       477813913474.jpg' class='file-preview-image' alt='肖像图片' title='肖像图片'>",  
    //             // ],  
                  
    //         }).on("filebatchselected", function(event, files) {  
    //             $(this).fileinput("upload");  
    //             })  
    //             .on("fileuploaded", function(event, data) {  
    //                 $("#path").attr("value",data.response);  
    //         });  
    //     }  
    function _uploadFile(uploadid,uploadurl) {
    $("#" + uploadid).fileinput({
        language: 'zh', //设置语言
        uploadUrl: uploadurl, //上传的地址
        allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
        //uploadExtraData:{"id": 1, "fileName":'123.mp3'},
        uploadAsync: true, //默认异步上传
        showUpload: true, //是否显示上传按钮
        showRemove: true, //显示移除按钮
        showPreview: true, //是否显示预览
        showCaption: false,//是否显示标题
        autoReplace: true,
        browseClass: "btn btn-primary", //按钮样式
        dropZoneEnabled: true,//是否显示拖拽区
        maxImageHeight: 1000,//图片的最大高度
        maxFileCount: 1,
        validateInitialCount: true,
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！"
    }).on("fileuploaded", function (e, data) {
        layer.msg("上传成功",{icon:1,time:500});
        // console.log(data.response);
    });
}

        $(function () {  
            _uploadFile("file",'{:U("Public/uploadfile")}');  
              
        })  
</script>

{/block}


